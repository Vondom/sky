// Generated by CoffeeScript 1.8.0
(function() {
  sky.Transaction = (function() {
    function Transaction(commitCount, parent, commitFunction) {
      this.commitCount = commitCount;
      this.parent = parent;
      this.commitFunction = commitFunction;
      this.initCommitCount = this.commitCount;
      if (!this.commitFunction) {
        if (_.isFunction(this.parent)) {
          this.commitFunction = this.parent;
          this.parent = null;
        }
      }
    }

    Transaction.prototype.reset = function(count) {
      if (count) {
        this.initCommitCount = count;
      }
      return this.commitCount = this.initCommitCount;
    };

    Transaction.prototype.commit = function() {
      this.commitCount--;
      if (this.commitCount <= 0) {
        if (this.commitFunction) {
          this.commitFunction();
        }
        if (this.parent) {
          return this.parent.commit();
        }
      }
    };

    return Transaction;

  })();

}).call(this);

//# sourceMappingURL=Transaction.js.map
